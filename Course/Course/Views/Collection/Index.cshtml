@model Collection
@{
    ViewData["Title"] = @SharedLocalizer["Collection"];
}
<div class="row mb-3">
    <div class="col-md">
        <h1 class="display-4">@Model.Name</h1>
        <h1 class="display-6 text-muted">@SharedLocalizer["Author"] - @Model.User.UserName</h1>
        <p>
            <a asp-action="Edit" asp-controller="Collection" asp-route-id="@Model.Id" class="btn btn-primary">@SharedLocalizer["Edit collection"]</a>
        </p>
    </div>
    @if (Model.ImageData != null)
    {
        <div class="col-md-4">
            <img src="data:image/jpeg;base64,@(Convert.ToBase64String(Model.ImageData))" width="100%" />
        </div>
    }

</div>
<div class="row mb-3">
    <table class="table table-striped table-hover table-responsive-sm">
        <thead>
            <tr>
                <th>@SharedLocalizer["Id"]</th>
                <th>@SharedLocalizer["Name"]</th>
                @foreach (CollectionField collectionField in Model.CollectionFields)
                {
                    <th>@collectionField.Name</th>
                }
                <th>@SharedLocalizer["Date of creation"]</th>
            </tr>
        </thead>
        <tbody>
            @foreach (Item item in Model.Items)
            {
                <tr>
                    <td>@item.Id</td>
                    <td>@item.Name</td>
                    @foreach (CollectionField field in Model.CollectionFields)
                    {
                        string fieldData = field.Type switch
                        {
                            "Integer" =>
                            item.IntegerFields.FirstOrDefault(itemField => itemField.CollectionFieldId == field.Id).Value.ToString(),
                            "String" =>
                            item.StringFields.FirstOrDefault(itemField => itemField.CollectionFieldId == field.Id).Value.ToString(),
                            "Text" =>
                            item.TextFields.FirstOrDefault(itemField => itemField.CollectionFieldId == field.Id).Value.ToString(),
                            "Datetime" =>
                            item.DatetimeFields.FirstOrDefault(itemField => itemField.CollectionFieldId == field.Id).Value.ToString(),
                            "Bool" =>
                            item.BoolFields.FirstOrDefault(itemField => itemField.CollectionFieldId == field.Id).Value.ToString()
                        };
                        <td>@fieldData</td>
                    }
                    <td>@item.CreatedDate</td>
                </tr>
            }
        </tbody>
    </table>
</div>
